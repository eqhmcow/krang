<tmpl_include header.tmpl>

<script type="text/javascript">
Krang.onload( function() {
  Krang.Help.set( 'story_active' );
} );

<tmpl_if row_count>
  view_story = function( id )
  {
    Krang.Form.submit( 'find_story', { rm: 'view', story_id: id } );
  }

  <tmpl_if may_checkin_all>
    checkin_selected = function()
    {
      if ( !Krang.pager_row_checked() )
        alert( 'Nothing selected to check in!' );
      else
        Krang.Form.submit( 'krang_pager_form', { rm: 'checkin_selected' }, { to_top: false } );
    }
  </tmpl_if>
</tmpl_if>
</script>

<h2>
Active Stories
</h2>

<tmpl_if row_count><tmpl_if may_checkin_all><div class="panel"><form>
  <input value="Check In" onclick="checkin_selected()" type="button">
</form></div></tmpl_if></tmpl_if>

<!--Krang::HTMLPager:-->
<tmpl_var pager_html>
<!--:Krang::HTMLPager-->

<tmpl_if row_count><tmpl_if may_checkin_all><div class="panel capped"><form>
  <input value="Check In" onclick="checkin_selected()" type="button">
</form></div></tmpl_if></tmpl_if>

<tmpl_if row_count>
  <form name="find_story" method="post" action="story.pl">
  <input name="rm" value="list_active" type="hidden">
  <input name="story_id" type="hidden">
  <input name="return_script" value="story.pl" type="hidden">
  <input name="return_params" value="rm" type="hidden">
  <input name="return_params" value="list_active" type="hidden">
  </form>
</tmpl_if>

<tmpl_include footer.tmpl>

