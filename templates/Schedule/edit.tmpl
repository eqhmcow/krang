<script language=javascript>
 function checkall(checkbox, prefix) {
     for (var i = 0; i < checkbox.form.elements.length ; i++) {
        var e = checkbox.form.elements[i];
        if (e.name && e.name.indexOf(prefix) == 0) {
           e.checked = checkbox.checked;
        }
     }
  }

  function delete_selected () {
        var myform = document.forms["current_schedule_form"];
        myform.submit();
    }

</script>

<tmpl_include header.tmpl>

<div class=dark-bar><tmpl_if is_story>Story<tmpl_else>Media</tmpl_if> Schedule Editor <tmpl_if simple>(Simple)</tmpl_if></div>

<div class=tight-form-box>
                                                                        
<table width=100% cellpadding=2 cellspacing=0>
                                                                        
<tr class=light>
<td>ID:</td>
<td><tmpl_var id></td>
</tr>

<tmpl_if is_story>                                                     
<tr class=light>
<td>Story Type:</td>
<td><tmpl_var story_type></td>
</tr>
</tmpl_if>
                                                             
<tr class=light>
<td>Current Version:</td>
<td><tmpl_var current_version></td>
</tr>
                                                                        
<tr class=light>
<td>Published Version:</td>
<td><tmpl_if published_version><tmpl_var published_version><tmpl_else>n/a</tmpl_if></td>
</tr>
                                                                        
<tr class=light>
<td>URL:</td>
<td><tmpl_var url></td>
</tr>
</table>
</div>
<br>
<TMPL_IF existing_schedule_loop>
<form name="current_schedule_form" method="POST">
<input type="hidden" name="rm" value="delete" override='1'>
<tmpl_if advanced><input type="hidden" name="advanced_schedule" value="1" override="1"></tmpl_if>
<input type="hidden" name="object_type" value="<tmpl_var object_type>">
  <table cellspacing="0" width="100%">
                                                                        
      <tr class="form-head">
          <th>Schedule</th>
          <th>Next Run</th>
          <th>Action</th>
          <th>Version</th>
          <th><input type="checkbox" name="checkallbox" value="1" onClick="checkall(this, 'schedule_delete_list')"></th>
      </tr>
                                                                        
  <tmpl_loop existing_schedule_loop>
      <tr>
          <td class="form-cell"><tmpl_var ESCAPE=HTML schedule></td>
          <td class="form-cell"><tmpl_var ESCAPE=HTML next_run></td>
          <td class="form-cell"><tmpl_var ESCAPE=HTML action></td>
          <td class="form-cell"><tmpl_if version><tmpl_var ESCAPE=HTML version><tmpl_else>&nbsp;</tmpl_if></td>          
          <td class="form-cell"><input type="checkbox" name="schedule_delete_list" value="<tmpl_var ESCAPE=HTML schedule_id>"></td>
      </tr>
  </tmpl_loop>
  </table>
  <div align="right">
<input type="button" value="Delete Checked" onClick="delete_selected()"></div>
</form>                                                                      
<TMPL_ELSE>
  <b>No Schedule Found</b>
</TMPL_IF>
<div class=form-box>

<form name="add_schedule_form" method="POST">
<input type="hidden" name="object_type" value="<tmpl_var object_type>">
<tmpl_if simple>
<input type="hidden" name="rm" value="add_simple" override='1'>
<table cellspacing="0" width="100%">
      <tr class="form-head">
          <th>Schedule Publication</th>
      </tr>
</table>
<tmpl_else>
<input type="hidden" name="advanced_schedule" value="1" override="1">
<input type="hidden" name="rm" value="add" override='1'>
<table cellspacing="0" width="100%">
      <tr class="form-head">
          <th>Add to Schedule</th>
      </tr>
</table>
</tmpl_if>
</form>
</div></div>


<div class=button-bar>
  <input type=button value="Return" onclick="document.return_form.submit()">
</div>

<form name="return_form" method="POST" action="<tmpl_if is_story>story.pl<tmpl_else>media.pl</tmpl_if>">
<input type="hidden" name="rm" value="edit">
</form>

<tmpl_include footer.tmpl>
