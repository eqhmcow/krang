<tmpl_include /header.tmpl>

<script language="Javascript">
<!-- //

    function add_contrib () {
        var myform = document.forms["add_contrib_form"];
        myform.submit();
    }

    function associate_selected () {
        var myform = document.forms["associate_selected_form"];
        myform.submit();
    }

    function unassociate_selected () {
        var myform = document.forms["current_contributors_form"];
        myform.rm.value = "unassociate_selected";
        myform.submit();
    }

    function reorder_contributors () {
        var myform = document.forms["current_contributors_form"];
        myform.rm.value = "reorder_contribs";
        myform.submit();
    }

    function do_return () {
        var myform = document.forms["do_return_form"];
        myform.submit();
    }

// -->
</script>


<div class="dark-bar">Associate Contributor</div>


<!-- Start outline table -->
<table border="1" cellpadding="5" cellspacing="0" width="100%"><tr><td>


<form name="do_return_form" method="POST" action="<tmpl_if associate_story>story.pl<tmpl_else>media.pl</tmpl_if>">
<input type="hidden" name="rm" value="edit">
</form>

<form name="add_contrib_form" method="POST">
<input type="hidden" name="rm" value="add">
<input type="hidden" name="search_filter" value="<tmpl_var ESCAPE=HTML search_filter>">
<input type="hidden" name="associate_mode" value="<tmpl_var ESCAPE=HTML associate_mode>">
</form>




Current Contributors

<br />

<form name="current_contributors_form" method="POST">
<input type="hidden" name="rm" value="reorder_contribs">
<input type="hidden" name="search_filter" value="<tmpl_var ESCAPE=HTML search_filter>">
<input type="hidden" name="associate_mode" value="<tmpl_var ESCAPE=HTML associate_mode>">


<TMPL_IF associated_contributors>

  <table cellspacing="0" width="100%">

      <tr class="form-head">
          <th>Last Name</th>
          <th>First,Middle Name</th>
          <th>Type</th>
          <th>Order</th>
          <th>[]</th>
      </tr>

  <tmpl_loop associated_contributors>
      <tr>
          <td class="form-cell"><tmpl_var ESCAPE=HTML last></td>
          <td class="form-cell"><tmpl_var ESCAPE=HTML first><tmpl_if middle>&nbsp;<tmpl_var ESCAPE=HTML middle></tmpl_if></td>
          <td class="form-cell"><tmpl_var ESCAPE=HTML type></td>
          <td class="form-cell"><tmpl_var order_contrib_popup_menu></td>
          <td class="form-cell"><input type="checkbox" name="contrib_unassociate_list" value="<tmpl_var ESCAPE=HTML contrib_id>:<tmpl_var ESCAPE=HTML contrib_type_id>"></td>
      </tr>

  </tmpl_loop>
 
  </table>

  <div align="right"><input type="button" value="Reorder" onClick="reorder_contributors()">
<input type="button" value="Delete" onClick="unassociate_selected()"></div>

<TMPL_ELSE>

  <b>No Contributors Found</b>

</TMPL_IF>

</form>


<table width="100%">
<form name="search_form" method="POST">
<input type="hidden" name="associate_mode" value="<tmpl_var ESCAPE=HTML associate_mode>">
<tr><td class="form-head">
SEARCH<br />
<input type="hidden" name="rm" value="search">
<input type="hidden" name="search_page" value="<tmpl_var ESCAPE=HTML search_page>">
<input type="textfield" name="search_filter" value="<tmpl_var ESCAPE=HTML search_filter>">
<input type="submit" value="Search">
</td></tr>
</form>
</table>




<form name="associate_selected_form" method="POST">
<input type="hidden" name="rm" value="associate_selected">
<input type="hidden" name="search_filter" value="<tmpl_var ESCAPE=HTML search_filter>">
<input type="hidden" name="associate_mode" value="<tmpl_var ESCAPE=HTML associate_mode>">


Choose Contributors

<br />

<b><a href="javascript:add_contrib()">Add A Contributor</a></b>


<TMPL_IF contributors>

  <table cellspacing="0" width="100%">

      <tr class="form-head">
          <th>Last Name</th>
          <th>First, Middle Name</th>
          <th>Type</th>
          <th>[]</th>
      </tr>

  <tmpl_loop contributors>
      <tr>
          <td class="form-cell" rowspan=<tmpl_var contrib_row_span>><tmpl_var ESCAPE=HTML last></td>
          <td class="form-cell" rowspan=<tmpl_var contrib_row_span>><tmpl_var ESCAPE=HTML first><tmpl_if middle>&nbsp;<tmpl_var ESCAPE=HTML middle></tmpl_if></td>

    <tmpl_loop contrib_types>
      <tmpl_unless __first__><tr></tmpl_unless>
          <td class="form-cell"><tmpl_var ESCAPE=HTML type></td>
          <td class="form-cell"><input type="checkbox" name="contrib_associate_list" value="<tmpl_var ESCAPE=HTML contrib_id>:<tmpl_var ESCAPE=HTML contrib_type_id>"></td>
      </tr>
    </tmpl_loop>

  </tmpl_loop>
 
  </table>

  <div align="right"><input type="button" value="Associate" onClick="associate_selected()"></div>


<TMPL_ELSE>

  <br /><br /><b>No Contributors Found</b>

</TMPL_IF>



</td></tr></table>
<!-- End outline table -->


<!-- End delete_selected_form -->
</form>


<div class="button-bar"><input type="button" value="Return" onClick="do_return()"></div>



<tmpl_include /footer.tmpl>

