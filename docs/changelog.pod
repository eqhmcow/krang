=head1 Krang Changelog

This document contains a list of changes for each release of Krang.


=head2 2.X - IN DEVELOPMENT

=over 

=item *

Fixed media bulk upload to ignore MacOSX fluff in upload archives
(__MACOSX directory and contents), as well as any file starting with a
dot. [Sam]

=item *

Fixed bug in New Template where it was imposible to clear the category
selector after making a selection and clicking Save.  [Sam]

=item *

Fixed a bug in media bulk upload - unless the media object was
originally created with its filename for title (i.e. uploaded via
bulk-upload or FTP) then trying to replace it with bulk upload
wouldn't work. [Sam]

=item *

In Krang::CGI::Status, import only ':html' functions from CGI, since
CGI's param() may mess up CAP's param().  [Bodo Schulze]


=item *

Added two new methods to Krang::ElementClass::TopLevel,
publish_frontend_app_template() and publish_frontend_app_stub().
These new methods permit a Krang site to publish interactive 
applications and templates for those applications easily and
consistently.  [Jesse Erlbaum]


=item *

Modified Site Server configuration to support CGI applications
(ending in ".cgi") and Apache::Registry apps (ending ".pl").
This will permit the site server to host interactive applications.
[Jesse Erlbaum]


=item *

Added new parameter "mode" to additional_content_block() method
in Publisher.  This new parameter permits the permission of the
file to be set, which is particularly useful for publishing
executable files.  [Jesse Erlbaum]


=item * 

Changed SiteServer to forbid any request which doesn't match a
publish or preview URL.  SiteServer trans handler now sets up 
C< $ENV{DOCUMENT_ROOT} > correctly which is needed in a CGI environment.
[Jesse Erlbaum]


=item * 

Krang::lib set to also ignore ".svn" directories.  [Jesse Erlbaum]

=item *

Stricter enforcement of asset permissions. [Michael Peters]

=item *

During Apache and FTP startup, krang now properly calls AddOn
init-handlers. [Michael Peters]

=back



=head2 2.008 - Dec 20th, 2006

=over

=item *

Fixed a long standing publishing bug.  Shuffling stories around could
cause the wrong files to be deleted when publishing.  [Sam]

=item *

Added several new configuration options which allow Krang instances to
run on separate IPs and have different SSL configurations.  [Sam]

=item *

Added a new option for addons, DataSetClasses.  This allows addons to
extend Krang::DataSet and include new objects in KDS files.  [Sam]

=item *

Implemented a system of univerally-unique identfiers (UUIDs) for Krang
objects with keys that may change (ex. stories may change their URL).
This allows updates between machines to propogate these changes
correctly when objects are moved with krang_export and krang_import.
[Sam]

=item *

Added C<PasswordChangeTime> and C<PasswordChangeCount> directives
to allow the forcing of users to change their password every C<PasswordChangeTime>
days and not permit users to use old passwords with C<PasswordChangeCount>
changes. [Michael Peters]

=item *

More uniform password validation. Now also easier to implement a custom
password policy as an addon. [Michael Peters]

=item * 

Added security feature of locking out users after several failed login
attempts. Configurable by the C<BadLoginCount>, C<BadLoginWait> and
C<BadLoginNotify> conf directives. [Michael Peters]

=item *

Fixed bug in Krang::AddOn which would cause multiple version upgrades
which include changes to class.conf to fail.  Specifically, the updated
class.conf (and other libraries) were not being reloaded until after
the upgrade ran.  [Jesse Erlbaum]

=item *

Fixed bug in import where templates that were not deployed on the original
site, where deployed on the target site upon import. [Michael Peters]

=item *

Fixed bug in install/upgrade when using a binary built for SSL
in the way SSL symlinked conf files were handled. [Michael Peters]

=back

=head2 2.007 - Sep 14th, 2006

=over

=item *

Changed ElementClass::ListGroup input_form so that it will not
redundantly label single-dimensional lists.  Also modified 
ListGroup to be more easily sub-classed. [Jesse Erlbaum]

=item *

Fixed bug in which HTTP redirects in KRANG_DEBUG mode would
cause session to not be unloaded and saved to disk.  [Jesse Erlbaum]

=item *

MSIE Mac is not un-supported (it never was really, it's now
official). Allow Konqueror to come in as well. [Michael Peters]

=item *

Fixed several places lacking in HTML escaping, particularly
in places that used Krang::HTMLPager. [Michael Peters]

=item *

Krang now automatically deletes any alerts tied to a desk when
that desk is deleted. [Michael Peters]

=item *

Fixed krang_install --FromBackup issues when the backups contain
addons. [Michael Peters]

=item *

Fixed bug where KDS import would trigger delete_hook calls when
updating elements for stories and categories. [Sam]

=item *

Allow users whose page-size preference is 100, to be able to toggle
between 100 and 20, instead of 100 and 100. [Michael Peters]

=item *

Fixed redirect problem when going to the installation root already
logged in on a single installation machine (resulted in a 404).
[Michael Peters]

=item *

Entering F<publisher.pl> without any query params or a story in
the session will now redirect to the workspace instead of croak'ing.
[Michael Peters]

=item *

Fix issue in Krang::CGI::Story::db_save() changes to the slug or title
could get lost if the submission was invalid for other reasons.
[Michael Peters]

=item *

In Krang::CGI::Story::view(), use tmpl_var 'is_root' to inform
templates/Story/view.tmpl whether to show the 'Edit' button or not.
In templates/Story/view.tmpl, get rid of tmpl_var 'old_version'
which fails to show this button when returning from viewing a non-root
sub-element.  [Bodo Schulze]


=item *

In templates/Contrib/associate_list_view.tmpl, alert user if no
contributor has been checked to (un-)associate.  [Bodo Schulze]


=item *

SiteServer configuration now does server-side includes by default.
SSI is very common for sites managed by Krang.  This will make
development use of the SiteServer more useful and easier.
[Jesse Erlbaum]


=item *

Binary distributions now include src/ allowing for rebuilding
installed copies of Krang. [Sam]

=item *

Fixed several bin/ scripts to always load Krang::Conf via
Krang::ClassLoader before using it.  This fixes problems overriding
Krang::Conf in an addon.  [Sam]

=item *

Fixed bug in Krang::ElementClass::TopLevel error message.  [Jesse Erlbaum]


=item *

Fixed long-standing bug in Krang::ElementClass::ListGroup in which 
multi-dimensional sub lists would not update if you used the
keyboard (not the mouse) to update the selected item.  [Jesse Erlbaum]


=item *

Added --delete_missing and --input_file options to krang_create_lists.
The latter will permit you to specify a lists.conf file for import.
The former will delete list/group/items which are not found in the
specified lists.conf (as opposed to adding the new records to the 
existing ones).  [Jesse Erlbaum]


=back


=head2 2.006 - August 11th, 2007

=over

=item *

Fixed bulk-edit to allow white-space on the blank line separating
paragraphs.  [Sam]

=item *

Modified krang_schedulectl to skip scheduler start-up if 
SchedulerMaxChildren parameter is set to 0 in krang.conf.
This is useful in development when you do not want the
scheduler to run.  [Jesse Erlbaum]


=item * 

Added new --grep option to krang_upload_media.  This option
permits you to use a regex to filter what you want media
to upload.  [Jesse Erlbaum]


=item *

Changed krang_upload_templates script to now handle "global"
templates (those without categories).  Fixed undefined value
warning in Krang::Template when searching for templates
without categories.  [Jesse Erlbaum]


=item *

Upgraded Archive::Tar to latest version (v1.29) to correct several
annoying bugs, including the nefarious "unable to read chunk" bug
related to high-ASCII characters contained in archived files.
[Jesse Erlbaum]


=item *

Added --clean option to bin/krang_addon_installer. [Michael Peters]


=item *

Added new index to element table.  This index will greatly speed 
complex publishing logic.  Thanks to James Reidy for identifying
the bottleneck.  [Jesse Erlbaum]


=item *

Fixed a bug in benchmarking system.  [Jesse Erlbaum]


=item *

Fixed a bug which could cause an upgrade to fail if the target Krang
has media files with single-quotes in their filenames. [Sam]

=back

=head2 2.005 - June 1st, 2006

=over

=item *

Made changes to Krang's Javascript to allow easier future integration
of Prototype Javascript library. [Michael Peters]

=item *

Fixed bug in Default::fancy_keywords; updates to fields would be lost
if a new element was added to the story. [Michael Peters]

=item *

Upgraded to HTML::Template::Expr v0.07, providing a better expression
syntax and some bug-fixes. [Michael Peters]

=item *

Fixed a bug which occurred when a story was reverted after a change in
category assignment. [Michael Peters]

=item *

Fixed KDS deserialization to work when categories point to stories and
media below in the category tree. [Michael Peters]

=item *

Fixed bug in Krang::CGI::Site::add_save_stay() where clicking "Delete"
right after "Save & Stay" wouldn't delete the newly created
site. [Bodo Schulze]

=item *

Added missing button GIF for Xinha's SuperClean plugin. [Bodo Schulze]

=item * 

Fixed krang_upgrade and krang_build to prevent overwriting existing
SSL certificates [Michael Peters]

=item *

Upgraded HTML::PopupTreeSelect to v1.5, fixing a bug affecting Firefox
and Camino on Mac OSX. [Sam]

=back

=head2 2.004

=over

=item *

Adapted t/publish.t to Michael Peters' SSL simplification patch. [Bodo
Schulze]

=item *

Fixed addon v2 compat bug in t/find.t. [Bodo Schulze]

=item *

Fixed Xinha link-munging so that you can now use the WYSIWYG editor
to create links and images.  Full-screen mode now works properly.
[Jesse Erlbaum]

=item *

In Krang::Publish I decoupled processing of assets from publish_story()
and preview_story() allowing for future subclassing into Krang::Publisher::Parallel
simply redefine _process_assets() and _process_preview_assets().
[Aaron Dancygier]

=item *

In Krang::Test::Content, modified _init_words() to skip words
containing an apostrophe. [Bodo Schulze]

=item *

Added a new configuration parameter, Charset.  This may be used to
control the character set for the Krang user-interface.  [Sam]

=item *

Fixed "Forbidden" bug in Xinha implementation by permitting 
static Xinha files.  [Jesse Erlbaum]

=item *

Made Krang::CGI::Category::find() and find_row_handler() addon v2
compliant. [Bodo Schulze]

=item * 

Added enforcement of permissions at the application and run-mode leve
rather than just at the UI level. [Michael Peters]

=item *

Make admin list manager work intuitively and statefully.  Pressing
RETURN does no longer submit the form, but adds a new to the
list. [Bodo Schulze]

=item *

In element_lib/TestParent1/* and element_lib/TestSet1/*, added addon
v2 compatibility. [Bodo Schulze]

=item *

In t/cgi.t, fixed addon v2 compat bug. [Bodo Schulze]

=item *

Upgraded to HTML::Template::Expr v0.06 - now with chained binary
operators! [Sam]

=item *

In Krang::Story, fixed addon v2 compatibility bug in find(). [Bodo
Schulze]

=item *

In Krang::History, replaced constants FIELDS, OBJECT_TYPES AND ACTIONS
with methods fields(), object_types() and actions()
respectively. [Bodo Schulze]

=item *

Allow multiple word action names in admin scheduler. [Bodo Schulze]

=item *

In admin contrib list view, made type column sortable. [Bodo Schulze]

=item *

For Krang::History, allow Krang::Story, Krang::Media and
Krang::Template to be overlayed with addon modules. [Bodo Schulze]

=item *

Added documentation for Krang::Widget::template_chooser() and cleaned
up template_chooser code. [Bodo Schulze]

=item *

Added tests for scalar methods admin_categories_ftp and admin_lists to
t/group.t [Bodo Schulze]

=item *

Added new primitive, Krang::ElementClass::CheckBoxGroup, 
which integrates with Krang's lists system, in addition
to permitting simple values.  [Jesse Erlbaum]

=item *

Added new option "--makecats" to krang_upload_media and 
krang_upload_templates.  When specified, missing categories
will be created in the CMS, instead of skipped.  [Jesse Erlbaum]

=item *

Fixed bug in Krang::ElementClass::ListGroup and Krang::ElementClass::RadioGroup 
such that associated ListItems will now be automatically added to the 
DataSet.  [Jesse Erlbaum]

=item *

Fixed bug in Krang::ElementClass::Date where date would change if KDS
was exported from a machine in one time zone and imported on a machine
in an earlier time zone.  [Jesse Erlbaum]

=back


=head2 v2.003

=over

=item *

Fixed sql/mypref.sql so that user's don't clobber each others
preferences. [Bodo Schulze]

=item *

Added missing setting of template param 'parent_path' to
Krang::CGI::ElementEditor::find_story_link() [Bodo Schulze]

=item *

Replaced template selector in 'New Template' and 'Find Template'
(advanced search) with category_chooser style template_chooser.
[Bodo Schulze]

=item *

Simplied use of --module option with bin/krang_build [Bodo Schulze]

=item *

Added checkbox to groups manager to allow "admin_lists" to be set.  [Jesse Erlbaum]

=item *

Fixed Kang::Navigation bug where Desks were not being displayed in proper order.
[Aaron Dancygier]

=item *

Fixed ISE when attempting to publish templates and media/stories at the same time
from the UI.
[Michael Peters]

=item *

Fixed ISE when viewing media files from the Scheduler UE.
[Michael Peters]

=back


=head2 v2.002

=over


=item *

Added new script krang_upload_media.  This works similarly to krang_upload_templates.
Using this script you can maintain a media/ directory in your add-on 
which contains all site-specific media.  This is particularly useful for
development, when developing templates and site design.  The script
krang_createdb now automatically loads any media found in your
add-on directory.  [Jesse Erlbaum]

=item *

Fixed L<Krang::Group> test to not key explicitly on name to simplify
overriding. [Peter Leonard]

=item *

Added addon admin scheduler 'admin_scheduler' permissioning bit so only admin users 
will see this feature. [Aaron Dancygier]

=item *

bin/krang_upgrade now checks that ENV{KRANG_ROOT} is unset [Aaron Dancygier]

=item *

Fixed bug in bin/krang_upgrade and bin/krang_createdb where without quotes mysql 
was converting db_version to float, instead of as just a string. [Aaron Dancygier]

=item *

Removed previous patch (v1.22) to bin/krang_upgrade.  Patch checked an upgrade 
directory in each addon directory for upgrade scripts to run. This is already 
supported in bin/krang_addon_installer.  In effect everytime you upgraded krang 
it would re-apply addon upgrade scripts. [Aaron Dancygier]

=back


=head2 v2.001

=over

=item *

Installer now chowns krang.conf to KrangUser:KrangGroup
instead of to root. [David Kaufman]

=item *

L<Krang::XML::Validator> now looks in the C<schema/> directories of
installed Krang addons to find .xsd files describing objects to be
imported or exported.  This furthers the support for non-standard
objects within Krang. [Peter Leonard]

=item *

Upgraded to HTML::Template v2.8 and HTML::Template::Expr v0.05. [Sam]

=item *

Fixed Krang::CGI::Help to lookup help files in an addon's
F<htdocs/help/> directory, allowing addons to provide their own help
content. [Sam]

=item *

Fixed a flaw in Krang::Handler that allowed access to any file via the
root handler.  Now only image files and the two Krang CSS files are
accessable without logging-in. [Sam]

=item *

Added new script, krang_upload_templates, to upload a 
directory of templates into a Krang instance.  Modified
krang_createdb to call this script.  [Jesse Erlbaum]


=item *

Sweetened up Krang::ElementClass::RadioGroup to use HTML
<labels>, and to allow you to specify a number of columns
for the input form.  Added "list_group" parameter to allow
RadioGroup to be populated from a Krang list.  [Jesse Erlbaum]


=item *

Added "find" parameter to Krang::ElementClass::StoryLink and 
::MediaLink, to allow element authors to pre-set a filter
in their element library.  Cleaned up some tests, silenced
some spurious warnings.  [Jesse Erlbaum]


=item *

Fixed bug in Krang::Alert which would not allow sub-classes of Krang
objects to be used.  Fixed Krang::ListItem tests in t/find.t, and
improved order_desc test to check entire result set.  Fixed bug
in t/library.t which caused some tests to appear without names.
[Jesse Erlbaum]


=item *

Fixed a bug in krang_create_lists which caused script to fail for
new addon system.  Added new feature to krang_create_lists and
lists.conf to permit list items to be specified. [Jesse Erlbaum]


=item *

Fixed a bug in which some tests would fail if the configured 
element set did not have an "article" type.  Tests will now run
even if you're using a custom element library.  [Jesse Erlbaum]


=item *

Fixed a bug in Krang::lib which caused "legacy" /krang/element_lib path to
not be included in Perl's @INC path.  [Jesse Erlbaum]


=item *

Extended bin/krang_upgrade to check an upgrade directory in each addon directory for  
upgrade scripts to run.  This is in addition to $KRANG_ROOT/upgrade. [Mike Friedman]


=item *

Fixed bug in Krang::ListItem that did not allow sub-classes of
Krang::List and Krang::ListItem to be used. [Bodo Schulze]


=item *

Made URL in message 'story_publish' a link opening the published 
story in a new window. [Bodo Schulze]


=item *

Fixed bug in Krang::Story which would not allow subclasses of
Krang::Contrib, Krang::ElementClass::StoryLink and
Krang::ElementClass::MediaLink to be used. [Bodo Schulze]

=item *

Addon-v2 compliance for bin scripts 
krang_scheduled krang_schedulectl krang_load_skin krang_info krang_ftpd
krang_ftpctl krang_floodfill krang_delete krang_create_lists krang_category_rename
krang_bench krang_backup krang_apachectl krang_siteserverctl krang_makedist krang_publish
[Aaron Dancygier]

=item *

Added SSL support. [Bodo Schulze]



=back


=head2 v2.000

=over

=item *

Fixed a bug in bin/krang_backup where foreign key constraints in the wrong order were 
conflicting with addons containing innodb tables.  Patch sets foreign_key_checks=0 
at the top of the dump file. [Michael Peters]

=item *

Fixed a bug in Krang::Publisher::ZeroSizeOutPut().  Wrong hash keys specified.
[Jesse Erlbaum]

=item *

Added C<delete> action to track in Krang::History::add_history().
Added add_history() calls in Krang::Story::delete(), Krang::Template::delete(), 
and Krang::Media::delete() [Aaron Dancygier]

=item *

Converted default element set to use Krang::ClassLoader and Krang::ClassFactory in 
compliance with new addon system. [Aaron Dancygier]

=item *

Fixed a bug where deleting an element and then reverting to an older
version where that element existed didn't properly restore the
element.  The old element would load properly but save wouldn't
restore it in the database. [Sam]

=item *

Added support for Fedora Core 4. [Aaron Dancygier]

=item *

Fixed compile bug in krang_backup introduced during the addon v2
work. [Sam]

=item *

Fixed link to static files (images, CSS, Javascript) to work through
the root server. [Sam]

=back

=head2 v1.999

=over

=item *

Added support for a new optional DBSock directive in krang.conf that
allows Krang to connect to a local MySQL server using a
user-configurable socket file location to resolve socket-related DBI
connection errors. [David Kaufman]

=item *

Refactored Krang::Scheduler class into 
Krang::Schedule 
Krang::Schedule::Action and 
Krang::Schedule::Action::[expire|publish|...|YourClass]
Where YourClass must implement an execute method.  
This Paves the way for custom scheduler addons.  
Simply write a class that inherits from Krang::Schedule::Action and
implements an execute() method. [Aaron Dancygier]

=item *

Added conditonal Scheduler link in left nav bar under admin section 
This is for non story or media related administrative scheduler addons.
Link points to new admin scheduler screen.
Allows you to use scheduler addons in place of external scripts run
by cron.  [Aaron Dancygier]

=item *

Added support for Scheduler addon classes that are tied to story 
or media content. This will show up in current scheduler screen.
[Aaron Dancygier]

=item *

Fixed shebang line bug in /htdocs .pl registry/cgi scripts and 
Addon *.pl scripts. [Aaron Dancygier]

=item * 

Fixed hardcoded perl bug in Addon.pm install() and uninstall() 
[Aaron Dancygier]

=item * 

Added tests for admin scheduler addons in t/addon_installer.t 
[Aaron Dancygier]

=item *

Added support for centos release 4 [Ado Nishimura]

=item *

Fixed bin/krang_ctl and bin/krang_scheduled, to use Krang::ClassLoader
[Ado Nishimura]

=item *

Fixed Krang::NavigationNode documentation and xinha German localization 
file [Bodo Schulze]

=item *

Fixed compile time ordering issues with bin/krang_addon_installer,
bin/krang_addon_uninstaller, and bin/krang_load_skin
[Bodo Schulze]

=item *

Fixed a bug where the logs would sometimes end up owned as root when
Krang was started as root.  [Sam]

=item *

Fixed bug in Krang::ElementClass::ListGroup::validate() which prevented
lists from setting required=>1.  [Jesse Erlbaum]

=item *

Fix bug that prevents users with "may check in all" permission from 
checking in templates checked out by other users. [Perrin]

=item * Add-On v2

The add-on v2 project is complete, bringing many improvements to the
way Krang add-ons work.  Here's a list of the biggest changes:

=over

=item * Add-ons are now located installed into a separate direction
called C<addons/>.  They may be developed in-place, potentially under
separate version control.

=item * Add-ons may be packaged with dependencies from CPAN in a
C<src/> directory.  The Krang build system will build these modules at
install time.

=item * Add-ons may be uninstalled using the new
C<krang_addon_uninstaller> script.  (This does not apply to addons
installed with the old system.)

=item * Add-ons may register new links in the left-navigation area.

=item * Add-ons may selectively override core Krang classes via
inheritence and the use of the C<conf/class.conf> configuration file.

=item * Add-ons may include SQL source for new tables which will be
included in the databases built by C<krang_createdb>.

=back

=item * WYSIWYG HTML Editor

Added a new element class, Krang::ElementClass::XinhaEditor, which
offers a WYSIWYG HTML editor based on the Xinha Javascript editor.
[Sam]

=item * Build Optimization

The Krang build system no longer builds man-pages for all the modules
it builds.  This reduces the overall build time by about 10%.  [Sam] 

=item * Upgraded to Apache v1.3.33.  

This brings Krang up-to-date with all released Apache security
fixes. [Sam]

=item *

Fixed a bug where setting use_category_templates to 0 in your
top-level class meant no additional_content_blocks will get category
content, regardless of their individual use_category setting. [Sam]

=item *

Fixed a bug where if you set publish_category_per_page to 1 in your
top-level class then any additional_content_blocks with use_category
set to 1 would get the last page's category content. [Sam]

=item *

Added a new method to Krang::ElementClass::TopLevel, file_mode().
This method may be overridden to control the mode of published
files. [Sam]

=item *

Fixed a bug where a category linking to a sub-category via an element
would break krang_import. [Sam]

=item *

Fixed the Krang FTP server to return template sorted by filename. [Sam]

=item *

Added support for Module::Build to the Krang build system. [Sam]

=item *

Documentation formatting cleanup. [Don Brodale]

=item *

Fixed a bug where the publish_category_per_page setting wasn't being
respected for additional content blocks. [Sam]

=back



=head2 v1.1025 - May 20, 2005

=over

=item *

Added ability for categories to be created or removed via the FTP
interface.  Added new group permission, "Manage categories via FTP"
which defaults to OFF.  Turn this on to permit your users to use
this new feature.  Fixed ASCII-mode bug in FTP interface. [Daniel Packer]


=item *

Added new platform files for RedHat Enterprise Server 
ES3 and ES4. [Jesse Erlbaum]

=back

=head2 v1.102 - April 18th 2004

=over

=item *

Added a new Krang::ElementClass method, mark_form_invalid().  This
method may be overriden to alter how Krang marks element form fields
invalid.  The default behvior, wrapping the field in a span set to the
"invalid" class remains. [Sam]

=item *

Upgraded to the latest release of HTML::PopupTreeSelect, v1.5. [Sam]

=item *

Improved support for Mac OSX, both in compilation and
documentation. [Aaron Ross]

=item *

Fixed amusing bug in Krang::Test::Content that was causing the same random
word sequences to be generated multiple times when called in a tight loop.
[Perrin]

=item *

Fixes to the import process as it affects L<Krang::ListItem>
objects - list orders are now preserved properly.  [Peter]

=item *

Can now bundle L<Krang::List> data with your element library, and have
it imported when the database is created (in the same fashion as
C<templates.kds>).  The file is C<lists.kds>.  [Peter]

=item *

Added C<slug> as a variable available to all templates at
publish-time.  This was intended to be there all along, but somehow
fell through the cracks.  [Peter]

=item *

L<Krang::ElementClass::ListGroup> now handles multidimensional lists
of arbitrary depth.  Further testing is needed, but so far things look
good.  [Peter Leonard, Andrea Bonotto]

=item *

Fixed a bug in L<Krang::DataSet> with loading compressed C<.kds.gz> files
and added a test for it.  Also fixed bug in dataset.t where it was not
skipping all the tests that need TestSet1 when TestSet1 is not available
[Perrin]

=item *

Fixed a bug in L<Krang::List> - default sort order for C<find> was by
C<name>, it is now by C<parent_list_id>.  [Peter]

=item *

Added tutorial documentation on how to use Lists in an element library. [Peter]

=item *

Changed HTML in templates to use C<text> rather than C<textfield> in form 
inputs. [Perrin]

=item *

Updated several modules: DBI to 1.47, WWW-Mechanize to 1.10,
URI to 1.35, and libwww-perl to 5.803. [Perrin]

=item *

Added C<bin/krang_addon_framework> - a new script to create a
supporting framework to simplify development of Krang addons. [Peter]

=item *

Added C<--rebuild> option to C<bin/krang_build> allowing it to build modules
even if there is an existing Krang build already. [Perrin]

=back

=head2 v1.101 - January 20, 2005

=over

=item *

Added C<--not_on_desk> option to C<bin/krang_publish> - limiting
publishing to checked-in items that are not on any desk. [Michael Peters]

=item *

Fixed a bug in L<Krang::Schedule> - cleanup of the C<tmp/> directory
was not being done properly.  This is now fixed. [Peter]

=item *

Cleaned up how C<KRANG_PERSIST> variables are stored in the session
cache for remembering search preferences.  The cleanup also fixed a
number of bugs - the C<Clear> buttons on the advanced-search pages now
work again, category searches are now done on a per-type basis
(e.g. separate Story/Media/Template category-search prefs), and search
terms are remembered properly. [Peter]

=item *

Fixed a bug in L<Krang::CGI::ElementEditor> - the new "save always
reorders" functionality that is part of 1.100 was breaking bulk-edit,
where reordering never happens.  This now works properly.  [Peter]


=item *

Added error-handling for Stories that return a zero-length string when
previewed/published.  [Peter]


=item *

Upgraded L<Imager> to 0.44 from 0.43, which fixes a bug involving
thumbnailing of extreme-aspect-ratio images. [Peter]

=item *

Fixed error message trapping in C<bin/krang_install> to get Krang to
play nicer with MySQL 4.1.x [Peter]

=item *

C<bin/krang_install> and C<bin/krang_createdb> now handle the C<@localhost>
in the MySQL user creation consistently. [Perrin]

=item *

C<bin/krang_ctl> no longer uses sudo for starting things on unprivileged
ports. [Perrin]

=item *

Upgraded C<Scalar-List-Utils> to 1.14 from 1.09 - this should fix some
compilation issues with MacOSX. [Peter]

=back

=head2 v1.100 - January 4, 2005

=over

=item *

C<About Krang> now reports server IP address, Addons are now
alphabetized properly. [Peter]

=item *

Added server IP address, along with instance-by-instance breakdowns to
C<bin/krang_info> [Peter].

=item *

Fixed a bug in L<Krang::Story>->_load_version() - the restored version
of the story still held outdated checkout and publish settings.  The
restored version now returns default values for those parameters
(e.g. not checked out, not published).  Note that this does not affect
C<revert()>.  The result is that scheduled publication of specific
story versions now works.  [Peter]

=item *

Added C<build_preview_url> to L<Krang::ElementClass::TopLevel>. [Peter]

=item *

Added alt_tag and alt_tag_like searching to L<Krang::Media>, also added
as an option in Media advanced find screen. [Matt]

=item * 

Clicking Story save/save and stay now reorders elements as well. [Matt]

=item *

L<Krang::Story>->find() can now search over a list of site_ids.
[Peter]

=item *

Bugfix to L<Krang::Category>->deserialize_xml().  Circular
dependencies were not being handled properly, causing imports of some
.kds files to fail. [Peter]

=item *

Upgraded DBD-mysql to 2.9004.  [Peter]

=item *

Bugfix to L<Krang::Dataset> - now xml files are validated based on
thier apperance in the index.xml file, as opposed to using File::Find
in the xml dir. [Matt]

=item *

Added session caching of search/advanced search options for 
Story/Media/Template. [Matt]

=item *

Added L<Krang::Publisher>->publish_context() - a means of storing
arguments during the publish of a given story. [Peter]

=item *

Added storage of sort order and sort by to session cache in 
L<Krang::HTMLPager>. [Matt]

=item *

Bugfix in L<Krang::Schedule> - alerts were not being run because 
of some incomplete code meant to check for valid alert id. [Matt]

=item * 

Made changes in media UI to:

=over

=item 1

add 'publish to preview' button and underlying functionality

=item 2

cause 'publish' button in edit screen to also preview the media

=item 3

remove the 'reset' button.

=item 4

have the 'Publish' button appear on the new media screen, no need to
have to click save first.

=back

[Matt]

=item *

Small bugfix to the Solaris C<Platform.pm> [Joseph Sacco]

=item *

C<bin/krang_upgrade> now supports remote MySQL databases.  [Aaron
Ross]

=item *

Bugfix for C<bin/krang_publish>, now correctly counts media total
and time with --to-preview option. [Matt]

=item *

Added C<bin/krang_expunge> - designed to work in conjunction with
C<bin/krang_extract_subset>, it deletes a site from a multi-site Krang
instance, and ensures that no dependencies are left hanging. [Peter]

=item *

Minor bugfix in C<bin/krang_extract_subset> - proper handling of
StoryLink/MediaLink elements that do not point to anything.

=back


=head2 v1.026 - November 4, 2004

=over

=item *

Re-generated templates.kds for the Default and Tutorial element
libraries, making them architecture-independent (see nfreeze note
below).  [Peter]

=item *

Krang now uses C<Storable::nfreeze> rather than C<Storable::freeze>
when saving binary and object data.  The move to C<nfreeze> should
make .kds files architecture-independent, allowing migrations between
different platforms (e.g. x86 / SPARC / PPC).  [Peter]

=item *

Updated L<Storable> to the current release, version 2.13.  [Peter]

=item *

Added C<bin/krang_extract_subset>.  This script is designed to extract
a single site and its' content from a multi-site Krang Instance.
[Peter]

=item *

L<Krang::Story> now handles calls to find() with an arrayref of
site_ids. [Peter]

=item *

L<Krang::Media> now handles calls to find() with an arrayref of
site_ids. [Peter]

=item *

L<Krang::Template> now handles calls to find() with an arrayref of
category_ids. [Peter]

=item * 

Fixed a bug in L<Krang::CGI::Site> that would cause ISE on attempted 
delete if a site had content in its root directory but no had no
other categories [Matt]

=item *

Added population of 'width', 'height', and 'image_dimensions' for 
Krang::ElementClass::MediaLink fill_template. [Matt]

=item *

Bugfixes to L<Krang::CGI::Template> that prevented files from being
uploaded to the edit template screen, and caused ISE when no filename
present. [Matt]

=item *

Bugfixes to L<Krang::Schedule> - checked out or missing objects will
no longer drop large perl-heavy error messages in the logs.  Thanks
for Michael Peters for the initial work to fix it.  [Peter]

=item *

Fixed a bug in L<Krang::Publisher> - zero-length story output is now
output properly, with a logfile entry to make a note of it.  [Peter]

=item *

Deployed version is now displayed in the template edit UI.
[Michael Peters]

=item *

Fixed a bug in L<Krang::Schedule> - scheduling specific versions of a
story or media object for publish now works again.  [Peter]

=item *

Additional documentation!  The long-awaited 
HREF[Creating an Element Library in Krang|building_element_library.html]! [Peter]


=item *

New documentation added -
HREF[Running Krang on the Desktop|krang_on_desktop.html]:
A guide on how to install and run Krang on your local machine.
[Peter]

=item *

Solaris support added!  Tested against Solaris 9, this should also
work against previous versions as well.  Thanks to Joseph Sacco
(jsacco@earthlink.net). [Peter]

=item *

Support for Mac OSX has been added!  Currently tested against 10.3.5,
let us know if it works on other versions!  Thanks to Matthew Wood
(matt@nomorefluffybunny.com).  [Peter]

=item *

C<bin/krang_info> now gives story/media stats for each
instance. [Peter]

=item *

Fixed a bug in L<Krang::ElementClass::StoryLink> where elements that
were never linked to stories no longer throw an error, but return
cleanly.  [Michael Peters]

=item *

Mandrake support has been added!  [Matt]

=item *

Fixed browser detection to deal with 1.0 prerelease of Firefox, which
gives a version number of 0.10.  [Aaron Ross]

=back

=head2 v1.025 - October 1, 2004

=over

=item *

Cleaned up error handling in L<Krang::Publisher> and the
C<bin/krang_publish> script - errors are now trapped properly and
reported in a cleaner fashion.  [Peter]

=item *

Fixed a bug in the upgrade process of 1.024.  Users who upgraded to
1.024 should immediately upgrade to 1.025.  [Peter]

=item *

C<bin/krang_publish> and C<bin/krang_delete> now properly interact
with hidden stories. [Peter]

=back


=head2 v1.024 - September 24, 2004

=over

=item *

Send HTTP header with root menu. [Aaron Ross]

=item *

Escape values on login page to foil cross-site scripting attacks. [Perrin]

=item *

Add option to show 100 results per page. [Perrin]

=item *

Restructured the index page in docs/ - added a 'User' section, moved a
few things around to make things easier for new users. [Peter]

=item *

Added C<bin/krang_info> - a simple command-line script to list the
currently configured status of Krang.  [Peter]

=item *

Reordered subroutine exports in L<Krang::Element> to fix a library
loading loop that cropped up under some circumstances.  Thanks to
Michael Peters (mpeters@plusthree.com) for finding it.  [Peter]


=item *

Added support for hidden stories, based on class definitions.  A
hidden story is one that, by default, does not show up in calls to
C<find()>.  This is useful for auto-generated story lists where some
types of stories shouldn't be listed.  For example, this will be used
immediately by HREF[Krang Sitemap|/addons.html] and 
HREF[Krang RSS|/addons.html], neither of which should show in most lists.  See
L<Krang::ElementClass::TopLevel> and L<Krang::Story> for more
information.  [Peter]

=item *

Upgraded L<IPC::Run> to 0.78, which is now pseudohash-free (later
versions of Perl complain). [Peter]

=item *

Moved htdocs/help/history.html to htdocs/help/log.html to correct links.
[Perrin]

=item *

Updated L<Imager> to 0.43. [Peter]

=item *

Updated L<HTTP::BrowserDetect> to the latest version, 0.98. [Peter]

=item *

Limited the directories being searched by C<bin/krang_install> when
looking to change execute permissions on a newly-installed backup
file.  There was no need to search a number of potentially large
directory trees, this should improve installation times. [Peter]


=item *

Added C<< published => 1 >> argument to L<Krang::Media> C<find()>
method.  Limits returning objects to those that have been published
before.

=back

=head2 v1.023 - August 31, 2004

=over

=item *

Fixed filenaming in C<krang_backup> to use the correct 2-digit month
(old month values were 00-11, not 01-12). [Peter]

=item *

Fixed a bug in L<Krang::Media> where thumbnails of certain images were
causing segfaults.  [Peter]

=item *

Fixed L<Krang::Story>->C<preview_urls()> to return the correct preview
URL for all sites when a story is associated with multiple sites.
[Peter]


=item *

Made L<Krang::Publisher>->C<additional_content_block()> a lot easier
to use from the developer perspective.  Rather than handling the
result of the call, everything is now handled internally.  Overriding
C<publish()> to use C<additional_content_block> is no longer required.
Additionally, it's backwards-compatible with the old way of doing
things, so no need to make changes to your element libraries.  [Peter]


=item *

Fixed symlink bug that caused thumbnails to disappear from the UI
after a Krang instance was moved to a different location on the
filesystem.  [Peter]

=item *

Fixed a bug where deleting a newly-copied story threw an error in the
UI. [Peter]

=item *

Added platform support for Gentoo release 1.5.2, thanks to a patch 
from Fred Moyer (fmoyer@plusthree.com) [Perrin]

=back


=head2 v1.022 - August 6, 2004

=over

=item *

Added support for passing a list of classes to Krang::Story->find().
[Sam]

=item *

Added support for C<publish_category_per_page()> in the publish
process.  This functionality allows element library developers to
generate category template output customized for each page in a
story. [Peter]

=item *

Fixed a bug where Krang::ElementClass would complain about a missing
template for a sub-element that wasn't actually needed. [Sam]

=item *

Fixed a bug related to the internal tracking of assets in
L<Krang::Publisher>.  This finishes up a minor restructuring that
ensures C<krang_publish> publishes each story/media object only once
during a publish run. [Peter]

=item *

Fixed a bug in C<krang_publish>.  When publishing with the
C<--site_id> argument, all media objects under that site are now
published, not just those media objects linked to stories. [Peter]

=item *

Cleaned up the code handling the management of internal asset lists in
L<Krang::Publisher>.  This code is used to ensure the same asset is
not published more than once during a publish run. [Peter]

=item *

Added support for searching on C<site_id> in Krang::Media->find().
[Peter]

=item *

Added C<publish_category_per_page()> to
L<Krang::ElementClass::TopLevel>.  This method will soon be used by
L<Krang::Publisher> to determine whether or not to publish category
elements once for each page in a story, or once for all pages in a
story.  [Peter]

=item *

Added automatic height and width data to the Default::image element. 
[Perrin]

=back

=head2 v1.021 - July 21, 2004

=over

=item *

Upped Apache timeout from 30 to 600.  30 seconds was too short to
preview some extremely large stories.  [Peter]

=item *

Errors writing to the filesystem while executing a preview/publish
through the Krang UI are now logged properly in C<logs/krang.log>.
Previously, they were only reported in user-friendly (as opposed to
admin-friendly) fashion to the UI.  [Peter]

=item *

Added indexes on the C<class> and C<published_version> columns in the
C<story> table.  This greatly speeds up searches against these fields.
[Sam]

=item *

Added new method C<use_category_templates()> to
L<Krang::ElementClass::TopLevel>.  This boolean method defaults to
true, and can be used to determine whether or not to wrap story output
in category templates. [Peter]

=item *

Fixed a bug which caused scheduler problems in upgraded Krang
installs.  Krang::Schedule::Daemon was missing code to reset
REMOTE_USER for each instance.  [Sam]

=item *

Added directory hashing to Krang::Media's XML serialization system.
This allows a single KDS file to contain any number of media files.
The previous limit was 32,000. [Sam]

=item *

Added C<no_parent> option to Krang::ListItem::find(). [Sam]

=item *

Fixed a bug in Krang::ListItem::find() which prevented C<ids_only>
from working. [Sam]

=item *

Added missing indexes to the list tables, providing an impressive
speedup in working on large lists. [Sam]

=item *

Fixed a bug that prevented Krang from installing on very recent MySQL
releases which do not tolerate trailing commas in C<CREATE TABLE>
statements. [Aaron Ross]

=item *

Added the ability to run Krang against a MySQL database on a different
machine.  There is a new configuration parameter, C<DBHost>, and a new
option to C<krang_install>, C<--DBHost>.  [Aaron Ross]

=item *

Fixed Krang::CGI::Publisher to not produce a nav-bar when preview
results in an error. [Sam]

=item *

Fixed Krang::User to not load Krang::Group unless it needs to interact
with groups.  This is needed because Krang::Script now uses
Krang::User to run as the 'system' user.  Loading Krang::Group will
cause Krang to load its element libraries, which isn't always a good
thing to do. [Sam]

=back

=head2 v1.020 - Jun 28, 2004

=over

=item *

Fixed bug in Krang::ElementClass::Date which prevented the default
method from returning the current date. [Sam]

=item *

Upgraded HTML::Template to the latest release, 2.7, to fix a bug where
a stale template could be returned from the cache under unusual
circumstances. [Sam]

=item *

Fixed a bug in the installer which prevented installing using an
element set contained within an add-on. [Sam]

=item *

Added the ability to pass a filename to Krang::ElementClass's
find_template() method.  [Matt]

=item *

Fixed a bug preventing deletions in the List Admin from working
correctly. [Matt]

=item *

Fixed a bug in the FedoraCore1 platform library that would fail to find
chkconfig unless it was in the user's PATH. [Sam]

=item *

Fixed a bug where elements using the default Krang::ElementClass
input_form() implementation would eventually cause browsers to slow to
a crawl and eventually crash.  The whole sordid tale is here:
http://perlmonks.org/index.pl?node_id=363214 [Sam]

=item *

Fixed a bug where clicking Publish on the Edit Media screen didn't
save changes. [Sam]

=item *

Fixed a bug where a story that failed to publish would still get a
'published' log entry.  [Sam]

=item *

Added support for Fedora Core 2. [Sam]

=item *

Fixed problem determining C<KRANG_ROOT> on Fedora Core 2 in all
Krang scripts. [Sam]

=back

=head2 v1.019 - Jun 04, 2004

=over

=item *

Fixed bug where C<krang_export> could only write output in directories
where C<KrangUser> had write permissions.  The output file is now
opened before su'ing to C<KrangUser>. [Sam]

=item *

Removed support for C<--append> from C<krang_export>.  This option was
never, to my knowledge, used and it didn't work after the permissions
fix above.  [Sam]

=item *

Changed the schema for the Krang::User XML format to make the new
'hidden' field optional.  This allows data files from pre-v1.017 Krang
to load in later Krangs. [Sam]

=item *

Fixed the v1.018 upgrade module to successfully upgrade instances from
v1.016 and older.  Also made changes to allow repeated runs of the
upgrade module to succeed even if the upgrade stops part way through.
[Sam]

=item *

Changed C<krang_upgrade> to wait till the upgrade is complete before
updating Krang's version number.  This means that failed upgrades can
be re-run and the same upgrade modules will be run again. [Sam]

=item *

Fixed Gentoo Platform tests so that any version of Gentoo 1.4.x now 
works. [Peter]

=item *

Fixed a bug in the error-handling section of Krang::Publisher that was
hiding the real cause of errors during publish.  [Peter]

=item *

Fixed broken --republish_only flag in bin/krang_publish. [Peter]

=item *

Changed the default of Krang::ElementClass::Date so that dates are updated 
when the default() method is called and not when new() is called.


=item *

Made Krang::Sotry::find(published=>1) work with stories that had a published 
version of 1/0 instead of NOT NULL / NULL.

=item *

Fixed Krang::XML::Writer to allow raw tabs in XML without Base64
encoding. [Sam]

=item *

Added a workaround for a very strange seg-fault bug.  [Sam]

=item *

Fixed bug where aftrer upgrading to v1.018 old users don't show up in
the User Admin list screen. [Sam]

=item *

Changed Krang::Site so that only the site's URL is required to be
unique.  Requiring all four fields to be unique, while seemingly
sensible, causes numerous problems during data imports.  If necessary
we could add these checks back in at the UI level in Krang::CGI::Site.
[Sam]

=item *

Fixed a bug in Krang::Contrib's full_name() that would add ", " to the
end of the name when the contributor had an empty suffix. [Sam]

=item *

Fixed a bug in Krang::Publisher where no file would be written if the
story's output contained only whitespace or was empty. [Sam]

=item *

Bugfix related to the publish changes made in 1.017 - assets linked to
a story being previewed from an edit interface are now marked
properly.  Media objects are now marked properly when previewed. [Peter]

=item *

Replaced Archive::Tar in Krag::DataSet->new with the system 'tar' for a 50x 
speedup in untaring. [Rudy]

=item *

Removed code from Krang::Contrib that disallowed stories with existing
historical contrib-contrib_type pairs to preview/publish. [Matt]

=back

=head2 v1.018 - May 10, 2004

=over

=item *

Fixed permissions error during upgrade backup creation. [Sam]

=item *

Fixed bug where permissions were not being applied to the Find Link
and Active list screens. [Sam]

=item *

Fixed a bug in Krang::Group which caused root-category permisssions to
be randomized during rebuild_category_cache().  [Sam]

=item *

Added C<--no-backup> option to C<krang_upgrade>. [Sam]

=item *

Fixed bug in C<bin/krang_publish> where unknown errors during story
publish would trigger an exit without any kind of useful message.  The
error is now printed to STDERR. [Peter]

=item *

Changed Krang to log and drop elements which exceed the maximum
allowed by their parent element.  This mirrors the behavior for
elements with illegal class names.  This allows for an easier element
set development process at the risk of possible data loss, which is
somewhat mitigated by the built in revision system. [Sam]

=item *

Fixed Krang::ElementLibrary to return a sorted list from top_levels().
This results in a sorted list or article types in the UI.  [Sam]

=item *

Added a new hidden user called 'system' which is now used by
Krang::Script.  This means you can now delete the 'admin' user with
impunity. [Sam]

=item *

Fixed bug where Krang::ElementClass::TopLevel::publish_check() was not
being checked by Krang::Schedule.  Stories that are marked to not be
published by the scheduler will now have their wishes respected.
[Peter]

=item *

Fixed bug where contributors created by C<krang_import> weren't
searchable in the UI unless they had first, middle and last
names. [Sam]

=item *

Added code to generate HTML documentation for the scripts in
F<bin/>. [Sam]

=item *

Fixed a bug where previewing/publishing zero-length stories caused an
error.  [Peter]

=back

=head2 v1.017 - April 29, 2004

=over

=item *

Fixed a bug where C<tmpl_include> calls in templates weren't correctly
searching the category tree in all cases. [Matt]

=item *

Modified Krang::Widget::category_chooser() to take into account
category permissions when building the category chooser.  Also took
advantage of the multiple-root support in HTML::PopupTreeSelect 1.4 to
remove to empty root node from the widget.  [Sam]

=item *

Upgraded HTML::PopupTreeSelect to the latest released version,
1.4. [Sam]

=item *

Fixed a bug in Krang::Group where the category permissions cache
wasn't being correctly rebuilt after group changes were saved. [Sam]

=item *

Added filesystem sanity checks to the Publish checks - If the
story/media object being tested does not exist on the filesystem in
all locations that it should, it's flagged for output, regardless of
versioning.  Also cleaned up some unneeded API cruft.  [Peter]

=item *

Large changes to the publishing engine.  When publishing/previewing a
story, Krang::Publisher will now check all related stories/media to
see if the most recent version of each object has been
published/previewed before.  If so, the object will not be
published/previewed again.  The chosen story/media object will always
be published/previewed.  This is only default behavior in the UI,
scheduled publish jobs and bin/krang_publisher still publish all
content.  Additional parameters have been added to the
Krang::Publisher API to support this functionality, see
L<Krang::Publisher> for more information.  [Peter]

=item *

Fixed bug in Krang::Contrib where importing a contributor with no
first name or no last name would duplicate the contributor if it
already existed instead of updating. [Sam]

=item *

Added the C<--skip> option to C<krang_import> which exposes the
existing Krang::DataSet::import_all() C<skip_classes> option from the
command-line. [Sam]

=item *

Removed "Delete Checked" button from List Admin screen.  Lists cannot
be deleted. [Sam]

=item *

Added Krang::Story->preview_version(), Krang::Media->preview_version
and Krang::ElementClass::TopLevel->force_republish() in anticipation
of forthcoming improvements to the publishing system. [Peter]


=item *

Upgraded XML::Validator::Schema to the latest release, 1.06. [Sam]

=item *

Fixed Krang::Story->preview_path() to use the submitted category
argument.  This was keeping preview from writing out content to
multiple sites. [Peter]

=item *

Added password-length check to My Preferences, enforcing the
6-character minimum length on passwords that exists everywhere else in
the UI.  [Peter]

=item *

Fixed error reporting in the publish process - error messages are
displayed in a more user-friendly fashion.[Peter]

=item *

Fixed Krang::ElementClass->publish() to trap errors thrown by
HTML::Template::Expr->output(), and fixed Krang::CGI::Publisher to
properly report errors and not try to redirect users when failures
occur in preview.  [Peter]

=item *

Fixed krang_ftpd to setup higher file and memory limits.  These limits
were preventing the FTP server from operating on some systems. [Sam]

=back

=head2 v1.016 - April 20, 2004

=over

=item *

Fixed Krang::DB to always turn on mysql_auto_reconnect (it was already
on by default under mod_perl).  This should prevent the schedule
daemon from periodically dying when a database connections times out.
[Sam]

=item *

Fixed bug in Krang::ElementClass which would fail to setup
"is_$element" template vars if "$element" wasn't used as a template
var itself. [Matt]

=item *

Changed site editor to allow colons so that port numbers can be
specified for preview URLs. [Perrin]

=item *

Synchronized Devel-StackTrace with latest from CPAN, so that we are
now using the standard release. [Perrin]

=item *

t/group.t now uses Krang::Test::Content to generate random content,
rather than bin/krang_floodfill. [Peter]

=item *

More comprehensive FreeBSD support.  Krang now works on FreeBSD 4.9
and 5.2.1, and should work on versions between and previous to that
(as long as the appropriate dependencies are in place).  [Peter]

=item *

ftpserver.t now uses Krang::Test::Content.  Simplifies cleanup, and
fixes a bug where ftpserver tests would fail if krang_install used the
--AdminPassword argument (a user is now created for the purposes of
testing). [Peter]

=item *

Added Krang::User creation/destruction to Krang::Test::Content -
furthering the goal that Krang::Test::Content should be able to create
all parts of a site randomly, and clean up everything properly at the
end. [Peter]

=item *

Modified Krang::Contrib::deserialize_xml() to create contributor types
as needed.  [Sam]

=item *

Changed Krang::ElementClass::Date to store and load data in XML using
an ISO-8601 date-time format. Also added missing template_data()
method.  [Sam]

=item *

Added support for Debian. [Jason Purdy]

=item *

Fixed bug where clicking on a media link in the element editor would
open a new window every time. [Sam]

=item *

Moved code to run tests from Makefile into bin/krang_test.  This
allows krang_install to affect which Perl binary runs the tests. It
also helps with BSD portability since the test target didn't work with
BSD make. [Sam]

=back

=head2 v1.015 - April 8, 2004

=over

=item *

Added a message to remind users that they must create a site before
adding stories, media or templates. [Sam]

=item *

Added initial support for FreeBSD!  Currently it only supports FreeBSD
5.2.1 with GNU make (gmake) installed, as that was the only available
testable environment.  Would be nice if someone with more experience
in BSD Makefiles could get Krang's Makefiles to work with BSD make.
There should be nothing keeping Krang from working with earlier
versions of FreeBSD, but that will require someone to pick up the BSD
ball and run with it.  [Peter]

=item *

Fixed site editor to check that URLs don't have paths attached to them
and that paths are obsolute. [Sam]

=item *

Fixed krang_upgrade to use Krang::Platform.  Added a new method to
Krang::Platform, post_upgrade_message(). [Sam]

=item *

Upgraded XML-Writer, HTML-Parser, and Tar-Archive to get rid of warnings.
[Perrin]

=item *

Upgraded mod_perl and apache to latest releases. [Perrin]

=item *

Fixed the behavior of Krang::Publisher->preview_story().  Following
the original spec, it now writes the story out to all categories in
the preview path.  Fixed Krang::Story->preview_path as well. [Peter]

=item *

Upgraded Test::Harness to 2.40 to enable warnings during tests.  Fixed
a number of warnings in the test files. [Perrin] [Sam]

=item *

Fixed bug where schedule tests would fail frequently due to
krang_schedulectl leaving bad PID files around.  Also made the
schedule tests quiet unless an error occurs. [Sam]

=item *

Fixed a bug where using a category_trail_loop in a category element
template produced an ISE. [Sam]

=item *

Added support for Fedora Core 1. [Perrin Harkins]

=item *

Moved Krang user/group creation from krang_install to Krang::Platform.
This can now be overridden on a platform-by-platform basis. [Peter]

=item *

Created Krang::Platform->find_bin().  Use of this sub now needs to be
propegated throughout krang_install along with Krang::Platform and its
derivatives - it searches $PATH for the full path for the executable
you're trying to run. [Peter]



=item *

Moved the final installation message out of bin/krang_install, created
Krang::Platform->post_install_message() that generates the same output.
This can now be overridden & extended on a platform-specific basis. [Peter]

=item *

Split the various checks out of Krang::Platform->verify_dependencies().
This will simplify ports to other platforms, as individual checks can
now be overridden, rather than the entire sub. [Peter]

=item *

Added new default scheduled job to analyze DB tables nightly.  This
greatly improves performance for large databases. [Sam]

=item *

Fixed bug where default scheduled jobs (tmp cleaner and session
expiration) weren't being run for new installations. [Sam]

=item *

Fixed krang_createdb to stop after the first failed system
call. [Scott Lanning]

=item *

Added enhanced cache debugging code and a last-resort check in an
Apache log_handler to make sure the cache is off at the end of the
request. [Sam]

=item *

Moved setup of /etc/init.d link from krang_install into the Redhat
platform modules' finish_installation() methods.  This should allow
the Gentoo and Debian ports to proceed. [Sam]

=item *

Fixed build and installation system to work with a Perl that isn't
called 'perl' and in your path.  So, for example, if you've got a
binary called 'perl5.8.0' you can build Krang with it and install with
it. [Sam]

=item *

Added initial support for Gentoo 1.4.3. [Peter]

=item *

Updated porting.pod with steps that might really work. [Sam]

=item *

Fixed a bug where an error occuring during preview triggered a
Krang::Cache error which corrupted the display. [Sam]

=item *

Improved error message generated when InstanceElementSet is set to an
element set that isn't installed. [Peter]

=item *

Fixed a ton of whitespace in module source files which was breaking
the POD output. [Peter]

=back

=head2 v1.014 - March 31, 2004

=over

=item *

First public release of Krang!

=back
