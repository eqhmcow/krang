#!/usr/bin/perl

use strict;
use warnings;

use Config;
use File::Spec;

BEGIN {
    my $lib = File::Spec->catfile($ENV{KRANG_ROOT}, 'lib');
    $ENV{PERL5LIB} = $ENV{PERL5LIB} ? "$ENV{PERL5LIB}:${lib}" : "${lib}";
    unshift @INC, $lib, "$lib/".$Config{archname};
    eval {require Krang::Conf};
    die <<END if $@;

######################################################################

Cannot load Krang.

Error message:

$@

######################################################################
END
}

# set schedule debug flag before Krang::Schedule import
BEGIN {$ENV{SCH_DEBUG} = 1;}

use Krang::Script;
use Krang::Schedule::Daemon;

Krang::Schedule::Daemon->run;
